{
  "response": "Revert the simplified performance type system and fully restore the structured main + subcategory setup. Inject the following SQL queries directly into Supabase to rebuild the schema correctly, then update the Flutter registration and profile UIs to match.\n\nSQL SCHEMA FIX:\n1️⃣ Add or verify the correct JSONB field:\nALTER TABLE user_profiles\nADD COLUMN IF NOT EXISTS performance_types JSONB;\n\n2️⃣ (Optional cleanup if old fields exist)\nALTER TABLE user_profiles\nDROP COLUMN IF EXISTS performance_type;\nALTER TABLE user_profiles\nDROP COLUMN IF EXISTS performance_subcategories;\nALTER TABLE user_profiles\nDROP COLUMN IF EXISTS performance_category;\n\n3️⃣ Verify Supabase cache refresh:\nNOTIFY pgrst, 'reload schema';\n\n4️⃣ Example JSON structure for performance_types (used for both data model and UI rendering):\n{\n  \"Music\": [\n    \"Singing\",\n    \"Guitar\",\n    \"Drums\",\n    \"Piano\",\n    \"DJing\",\n    \"Violin\",\n    \"Bass\"\n  ],\n  \"Dance\": [\n    \"Hip Hop\",\n    \"Ballet\",\n    \"Breakdance\",\n    \"Contemporary\",\n    \"Tap\",\n    \"Salsa\",\n    \"Freestyle\"\n  ],\n  \"Visual Arts\": [\n    \"Painting\",\n    \"Drawing\",\n    \"Graffiti\",\n    \"Sculpture\",\n    \"Body Art\",\n    \"Mural\",\n    \"Photography\"\n  ],\n  \"Comedy\": [\n    \"Stand-up\",\n    \"Improv\",\n    \"Satire\",\n    \"Sketch\",\n    \"Mimicry\",\n    \"Physical Comedy\",\n    \"Clowning\"\n  ],\n  \"Magic\": [\n    \"Street Magic\",\n    \"Card Tricks\",\n    \"Illusions\",\n    \"Mentalism\",\n    \"Escape Acts\",\n    \"Comedy Magic\",\n    \"Fire Tricks\"\n  ],\n  \"Other\": [\n    \"Poetry\",\n    \"Storytelling\",\n    \"Puppetry\",\n    \"Beatboxing\",\n    \"Spoken Word\",\n    \"Multimedia\",\n    \"Experimental\"\n  ]\n}\n\nFLUTTER UPDATES:\n• registration_screen.dart → Allow user to tap a main category (Music, Dance, etc.) and dynamically load subcategories.\n• performer_specific_fields.dart → Display expandable panels for each main category, each with toggles for subcategories (multi-select).\n• When the performer submits, save the full structure (main category + chosen subcategories) to the performance_types JSONB field in Supabase.\n• user_profile.dart and profile display widgets → Render badges for each selected subcategory under the main category labels between the bio and supporters/supporting/videos row.\n\n✅ After the SQL schema updates, rebuild the app using:\nflutter clean && flutter pub get && flutter build web --release --no-tree-shake-icons\n\n✅ Confirm the flow:\n1. Create new Street Performer account → Select multiple categories and subcategories.\n2. Verify successful Supabase insert (performance_types column populated with JSON data).\n3. Open Performer Profile → Subcategories should display as labeled badges (icon + text) under bio.\n\nIf any Supabase cache issues persist, re-run:\nSELECT pg_notify('pgrst', 'reload schema');"
}