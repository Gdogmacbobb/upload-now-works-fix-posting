ğŸ› ï¸ The Strongest Plan (Root Cause Fix)

Step 1 â€” Nuke and Rebuild Clean

Run:

flutter clean
flutter pub get
flutter build web


Delete /build/web entirely before rebuilding (kills stale splash assets).

Verify in /build/web/index.html â†’ the only script is:

<script src="main.dart.js" type="application/javascript"></script>


Step 2 â€” Minimal Navigation Only
In main.dart replace navigation with just this until it works:

void main() {
  print('[APP] main() started');
  runApp(MaterialApp(
    debugShowCheckedModeBanner: false,
    initialRoute: '/presplash',
    routes: {
      '/presplash': (_) => PresplashScreen(),
      '/splash': (_) => StatueSplashScreen(),
      '/login': (_) => LoginScreen(),
      '/discovery': (_) => DiscoveryScreen(),
    },
    onUnknownRoute: (_) => MaterialPageRoute(
      builder: (_) => DiscoveryScreen(),
    ),
  ));
}


Step 3 â€” Minimal Screens

class PresplashScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    Future.delayed(Duration(seconds: 1), () {
      Navigator.pushReplacementNamed(context, '/splash');
    });
    return Scaffold(body: Center(child: Text('[PRESPLASH]')));
  }
}

class StatueSplashScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    Future.delayed(Duration(seconds: 3), () {
      Navigator.pushReplacementNamed(context, '/login');
    });
    return Scaffold(
      body: Center(child: Text('[SPLASH] Statue of Liberty Screen')),
    );
  }
}

class LoginScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Center(
        child: ElevatedButton(
          child: Text('Login â†’ Discovery'),
          onPressed: () =>
              Navigator.pushReplacementNamed(context, '/discovery'),
        ),
      ),
    );
  }
}

class DiscoveryScreen extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(body: Center(child: Text('[DISCOVERY] Feed')));
  }
}


Step 4 â€” Kill All Service Workers

Confirm no flutter_service_worker.js exists in /build/web/.

In Chrome DevTools â†’ Application â†’ Service Workers â†’ click Unregister for all.

Hard refresh (Ctrl+Shift+R).